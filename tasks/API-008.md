# Отчёт по задаче API-008

## Статус

Выполнено.

## Что сделано

- Реализован endpoint `POST /api/v1/import` в `backend/app/api/v1/router.py`:
  - добавлен merge по имени типа;
  - добавлено суммирование `stage_counts` по всем системным стадиям;
  - добавлен append истории перемещений;
  - импорт выполняется в одной транзакции с полным rollback.
- Добавлен код ошибки `ERR_INVALID_IMPORT_FORMAT` в `backend/app/api/v1/errors.py` для единообразной обработки невалидного импорта.
- Расширены API-схемы в `backend/app/api/v1/schemas.py`:
  - `ImportStageCount`, `ImportHistoryItem`, `ImportTypeItem`, `ImportRequest`, `ImportResponse`.
- Добавлены интеграционные тесты `backend/tests/test_import_api.py`:
  - merge-сценарий (суммирование счетчиков + append истории);
  - rollback-сценарий при частично некорректном payload (all-or-nothing).
- В `BACKLOG.md` задача `API-008` отмечена выполненной.
- В `CHANGELOG.md` добавлена запись о задаче.

## Верификация

- `make quality` — успешно (backend format/lint/tests, frontend format/lint/typecheck/build/test).

## Принятые решения

- ADR: [`ADR-0019`](../ADR/ADR-0019-import-endpoint-api-008.md)
