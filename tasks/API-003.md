# Отчёт по задаче API-003

## Статус

Выполнено.

## Что сделано

- Реализован endpoint `POST /api/v1/types` в `backend/app/api/v1/router.py`:
  - добавлено создание типа миниатюр через SQLAlchemy с `201 Created`;
  - ответ возвращается в формате `TypeListItem` с полным набором стадий и нулевыми counts;
  - нарушение уникальности имени маппится в бизнес-ошибку `ERR_DUPLICATE_TYPE_NAME`.
- Добавлена request-схема `TypeCreateRequest` в `backend/app/api/v1/schemas.py`:
  - строгая валидация (`strict=True`, `extra='forbid'`);
  - trimming имени (`str_strip_whitespace=True`);
  - ограничение длины имени `1..255`.
- Добавлены интеграционные тесты `backend/tests/test_types_create_api.py`:
  - успешное создание нового типа;
  - корректная ошибка при дублировании имени;
  - проверка, что при создании типа действительно появляются `stage_counts` по всем стадиям.
- В `BACKLOG.md` задача `API-003` помечена выполненной.
- В `CHANGELOG.md` добавлена запись по `API-003`.

## Верификация

- `make quality` — успешно (backend format/lint/tests, frontend format/lint/typecheck/build/test).

## Принятые решения

- ADR: [`ADR-0014`](../ADR/ADR-0014-create-type-endpoint-api-003.md)
