# Отчёт по задаче API-002

## Статус

Выполнено.

## Что сделано

- Реализован endpoint `GET /api/v1/types` в `backend/app/api/v1/router.py`:
  - выборка типов с `LEFT JOIN` к `stage_counts`;
  - сортировка по `name ASC` (со стабильным tie-breaker по `id ASC`);
  - агрегация в ответ `{"items": [...]}` с обязательными `counts` по всем 5 стадиям.
- Добавлены response-схемы в `backend/app/api/v1/schemas.py`:
  - `TypeStageCounts`, `TypeListItem`, `TypeListResponse`.
- Добавлена DB dependency-инфраструктура `backend/app/db/session.py`:
  - `get_db_session` для FastAPI DI;
  - lazy/cached фабрика сессий по `DATABASE_URL`.
- Добавлены интеграционные тесты `backend/tests/test_types_list_api.py`:
  - пустая БД возвращает пустой список;
  - endpoint возвращает отсортированный список и полные `counts` по стадиям.
- В `BACKLOG.md` задача `API-002` помечена выполненной.
- В `BACKLOG.md` добавлена новая задача `DOCS-002` (создание отсутствующего `AGENTS.md`).
- В `CHANGELOG.md` добавлена запись по `API-002`.

## Верификация

- `make quality` — успешно (backend format/lint/tests, frontend format/lint/typecheck/build/test).

## Принятые решения

- ADR: [`ADR-0013`](../ADR/ADR-0013-types-list-endpoint-api-002.md)
