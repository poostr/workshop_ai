# Отчёт по задаче DB-003

## Статус

Выполнено.

## Что сделано

- Добавлена миграция `backend/alembic/versions/0002_seed_stage_counts_on_type_insert.py`.
- Реализовано автоматическое создание строк `stage_counts` на все стадии (`IN_BOX`, `BUILDING`, `PRIMING`, `PAINTING`, `DONE`) при вставке нового типа:
  - для PostgreSQL через trigger function;
  - для SQLite через trigger (для тестового контура).
- Расширен `backend/tests/test_migrations.py`:
  - добавлен тест `test_type_insert_seeds_all_stage_counts`, который проверяет, что после создания типа в БД существуют 5 записей `stage_counts` с `count = 0`.
- В `BACKLOG.md` задача `DB-003` помечена выполненной.
- В `CHANGELOG.md` добавлена запись по `DB-003`.

## Верификация

- `make backend-test` — успешно.
- `make frontend-test` — успешно.

## Принятые решения

- ADR: [`ADR-0010`](../ADR/ADR-0010-stage-counts-seeding-db-003.md)
