# ADR-0027: Export/Import UI (FE-007)

**Дата:** 2026-02-25
**Статус:** Принято

## Контекст

Необходимо реализовать UI для экспорта и импорта всего состояния приложения в формате JSON. Backend API уже предоставляет `GET /api/v1/export` и `POST /api/v1/import`.

## Решения

### 1. Размещение кнопок на главной странице

Экспорт и импорт — глобальные операции (затрагивают все типы), поэтому кнопки размещены на `MainPage` в нижней части, визуально отделённой от списка типов через `border-top`. Это не загромождает шапку приложения и логически связывает действия с контекстом данных.

### 2. Экспорт через Blob + programmatic anchor click

Вместо навигации на endpoint или `window.open` используется `Blob` + `URL.createObjectURL` + `<a>.click()`. Это позволяет:
- контролировать имя файла (с timestamp);
- не логировать данные экспорта в сетевой вкладке как навигацию;
- работать единообразно во всех браузерах.

### 3. Импорт через hidden file input

Стандартный паттерн: `<input type="file" hidden>` + кнопка, вызывающая `.click()` на input. После выбора файла:
1. Клиентская проверка JSON-валидности (раннее отклонение с локализованной ошибкой).
2. Отправка на backend через `apiClient.importState()`.
3. При успехе — обновление списка типов и показ success-сообщения.

### 4. Компонент ExportImportSection

Выделен в отдельный компонент (`ExportImportSection`) для:
- изоляции состояния (loading, messages) от `MainPage`;
- единственной зависимости от `MainPage` — callback `onImported` для перезагрузки списка.

## Последствия

- UI экспорта/импорта полностью покрывает DoD задачи FE-007.
- Все строки в UI через i18n-ключи (без хардкода).
- Ошибки импорта (невалидный JSON, ошибки backend) показываются локализованно.
