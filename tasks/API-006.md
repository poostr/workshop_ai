# Отчёт по задаче API-006

## Статус

Выполнено.

## Что сделано

- Реализован endpoint `GET /api/v1/types/{id}/history` в `backend/app/api/v1/router.py`:
  - добавлена выборка сырых записей `history_logs` по `type_id` с детерминированной сортировкой `created_at ASC, id ASC`;
  - добавлена read-time группировка по правилам PRD: одинаковый переход `from->to`, только соседние события, временной порог `<= 300` секунд;
  - `timestamp` группы возвращается как время первого события группы;
  - для отсутствующего типа возвращается `404`.
- Расширены API-схемы в `backend/app/api/v1/schemas.py`:
  - добавлены `TypeHistoryGroup` и `TypeHistoryResponse`.
- Добавлены интеграционные тесты `backend/tests/test_type_history_api.py`:
  - проверка границ `299/300/301` секунд;
  - проверка правила «несоседние одинаковые переходы не группируются».
- В `BACKLOG.md` задача `API-006` отмечена выполненной.
- В `CHANGELOG.md` добавлена запись о задаче.

## Верификация

- `make quality` — успешно (backend format/lint/tests, frontend format/lint/typecheck/build/test).

## Принятые решения

- ADR: [`ADR-0017`](../ADR/ADR-0017-history-read-time-grouping-api-006.md)
