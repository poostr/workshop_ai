# Отчёт по задаче DB-001

## Статус

Выполнено.

## Что сделано

- Реализован базовый слой хранения backend:
  - `backend/app/db/base.py`;
  - `backend/app/db/models.py`;
  - `backend/app/db/__init__.py`.
- Добавлен единый источник системных стадий: `backend/app/domain/stages.py`.
- Настроен Alembic на работу с метаданными моделей (`backend/alembic/env.py`).
- Placeholder-ревизия `backend/alembic/versions/0001_init_schema_placeholder.py` заменена на создание целевой схемы:
  - `miniature_types` с `UNIQUE` по `name`;
  - `stage_counts` с `CHECK count >= 0`, `UNIQUE(type_id, stage_name)`, `FK` и index по `type_id`;
  - `history_logs` с `CHECK` на валидность стадий, `CHECK qty > 0`, `FK` и index по `type_id`.
- В `BACKLOG.md` задача `DB-001` помечена выполненной.
- В `CHANGELOG.md` добавлена запись по `DB-001`.

## Верификация

- `make quality` — успешно.

## Принятые решения

- ADR: [`ADR-0008`](../ADR/ADR-0008-db-schema-and-constraints-db-001.md)
