# QA-003: Tests: history grouping границы времени

## Статус: Выполнено

## Что сделано

### Расширен файл тестов `backend/tests/test_type_history_api.py`

**Рефакторинг (1 helper)**:
- `_create_type_and_seed_history` — создание типа через API + вставка сырых событий в `history_logs`, устранение дублирования setup-логики.

**Новые тесты (7 шт.)**:
- `test_get_type_history_exactly_300_seconds_groups` — точная граница 300с → группируются
- `test_get_type_history_exactly_301_seconds_does_not_group` — точная граница 301с → не группируются
- `test_get_type_history_sliding_window_groups_beyond_300s_from_start` — цепочка по 299с, span 897с от первого → одна группа
- `test_get_type_history_empty_returns_empty_items` — пустая история
- `test_get_type_history_single_event_returns_one_group` — единственное событие
- `test_get_type_history_multiple_disjoint_groups` — чередующиеся переходы → 3 группы
- `test_get_type_history_simultaneous_events_group` — события в одну секунду → группируются

**Сохранённые тесты (2 шт., рефакторены)**:
- `test_get_type_history_groups_adjacent_events_by_299_300_301_seconds` — составной 299/300/301
- `test_get_type_history_does_not_group_non_adjacent_equal_transitions` — не соседние не группируются

## Результаты
- 40 тестов passed (33 существующих + 7 новых)
- Backend lint: 0 ошибок

## ADR
- [ADR-0030](../ADR/ADR-0030-history-grouping-tests-qa-003.md)
