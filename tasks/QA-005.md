# QA-005 — Minimal e2e smoke

**Статус:** Выполнена
**Дата:** 2026-02-26

## Что сделано

1. Создан e2e smoke-тест `tests/e2e_smoke.py` — самодостаточный Python-скрипт (только stdlib), покрывающий полный сценарий:
   - health check с ожиданием готовности сервиса;
   - создание типа миниатюр;
   - проверка дубликата имени (ERR_DUPLICATE_TYPE_NAME);
   - seed данных через import;
   - перемещение вперёд по стадиям (IN_BOX → BUILDING, BUILDING → DONE);
   - перемещение назад (ERR_INVALID_STAGE_TRANSITION);
   - перемещение с недостаточным количеством (ERR_INSUFFICIENT_QTY);
   - получение сгруппированной истории;
   - экспорт полного состояния;
   - импорт с merge-семантикой и верификация суммирования counts;
   - проверка append-семантики истории после merge;
   - список типов;
   - невалидный импорт (ошибка формата).

2. Добавлен Makefile-таргет `make e2e-smoke` с опциональным `E2E_BASE_URL`.

3. README.md дополнен:
   - секцией «E2E Smoke Test» с инструкциями по запуску;
   - ручным чеклистом для UI-проверок.

## Верификация

- Все 49 backend unit/integration тестов проходят.
- E2E smoke: 17 шагов пройдены как напрямую (`:8000`), так и через nginx (`:8080`).
- Backend lint: 0 ошибок.

## Решения

- [ADR-0032](../ADR/ADR-0032-e2e-smoke-test-qa-005.md) — выбор API-level smoke вместо Playwright.
